<html>
    <head>
        <title>First Time User</title>
        <script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
        <link rel="stylesheet" href="styles/index.css" type="text/css">
    </head>
    
    <body onload="welcome()">
        <div class="page-header container text-center">
            <h1>International Alert Security App</h1>
        </div>
        <div class="container text-center">
            <h3>Create Account</h3>
        </div>
        <div id="container" class="info">
            <p>Email Address
            <input class="textbox" type="email" id="name" placeholder="Enter your email">
            </p>
            <p>Password
            <input class="textbox" type="password" id="password1" placeholder="Enter your password">
            </p>
            <p>Confirm
            <input class="textbox" type="password" id="password2" placeholder="Confirm your password">            
            </p>
            <button onclick="existingAcc()">Existing User</button>
        </div>
        <button class="submit" onclick="validateAcc()">Create Account</button>
        <script>
            function welcome() {
                alert("Hello! It appears that this is the first time you have run the Alert Security App.\nPlease enter your email address and desired password to create an account.");
            }
        </script>
        <script>
            var password1 = "";
            function validateAcc() {
                email = document.getElementById("name").value;
                password1 = document.getElementById("password1").value;
                password2 = document.getElementById("password2").value;
                if (email === "") {
                    alert("Please enter an email");
                    return;
                }
                if (password1 === "") {
                    alert("Please enter a password");
                    return;
                }
                if (password2 === "") {
                    alert("Please re-enter password");
                    return;
                }
                if (password1 === password2) {
                    createAcc();
                } else {
                    alert("Passwords do not match");
                    return;
                }
            } 
        </script>
        <script>
            function createAcc() {
                var ref = new Firebase("https://crackling-fire-1447.firebaseio.com");
                ref.createUser({
                    email    : email,
                    password : password1
                }, function(error, userData) {
                    if (error) {
                        alert("Error creating account");
                    } else {
                        alert("Successfully created user account");
                        localStorage.setItem("status", "true");
                        window.location="index.html";
                    }
                });   
            }
        </script>
        <script>
            function existingAcc() {
                localStorage.setItem("status", "true");
                window.location='index.html';
            }
        </script>
    </body>
</html>